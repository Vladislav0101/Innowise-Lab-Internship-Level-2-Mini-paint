(function(t){function e(e){for(var s,i,o=e[0],c=e[1],u=e[2],m=0,d=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},4053:function(t,e,n){"use strict";n("b35e")},"41a3":function(t,e,n){},4626:function(t,e,n){},"5a11":function(t,e,n){t.exports=n.p+"img/pencil.557bda3a.png"},"644e":function(t,e,n){},7458:function(t,e,n){},8734:function(t,e,n){"use strict";n("7458")},"90a2":function(t,e,n){"use strict";n("41a3")},a4fa:function(t,e,n){t.exports=n.p+"img/save.299390e4.png"},b35e:function(t,e,n){},c668:function(t,e,n){"use strict";n("fee5")},ca68:function(t,e,n){"use strict";n("4626")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b0c0");var s,a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper",attrs:{id:"app"}},[n("router-view",{attrs:{to:"/"}})],1)},i=[],o=n("2877"),c={},u=Object(o["a"])(c,r,i,!1,null,null,null),l=u.exports,m=n("8c4f");(function(t){t["main"]="/",t["sign"]="/sign",t["registration"]="/registration",t["create"]="/create"})(s||(s={}));var d=s,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("Header"),n("section",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputUser,expression:"inputUser"}],attrs:{type:"text",placeholder:"find"},domProps:{value:t.inputUser},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterUsers(e)},blur:t.filterUsers,input:function(e){e.target.composing||(t.inputUser=e.target.value)}}})]),t.arrOfChosenUserPict||t.arrayOfUrls?n("section",{staticClass:"feed"},t._l(t.arrOfChosenUserPict?t.arrOfChosenUserPict:t.arrayOfUrls,(function(t){return n("PictureBox",{key:t.date,attrs:{pictureInfo:t}})})),1):n("section",[t._v("I'm sorry")])],1)},f=[],h=n("5530"),v=(n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[t.isCreated?n("BackToMainButton"):n("CreationButton"),n("router-link",{staticClass:"logo",attrs:{to:{name:"main"}}},[n("h1",[t._v(" mini-paint ")])]),t.isCreated?n("SaveButton",{attrs:{canvas:t.canvas}}):n("LogoutButton")],1)}),g=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:{name:"create"}}},[n("button",{staticClass:"createButton"},[t._v(" create ")])])},b=[],P={},C=Object(o["a"])(P,_,b,!1,null,null,null),S=C.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"logoutButton",on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("logout")])},O=[],x=n("2f62"),U=a["a"].extend({methods:Object(h["a"])(Object(h["a"])({},Object(x["b"])(["logoutUser"])),{},{logout:function(){this.logoutUser()}})}),y=U,E=Object(o["a"])(y,w,O,!1,null,null,null),T=E.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{attrs:{to:{name:"main"}}},[n("button",{staticClass:"createButton"},[t._v(" main ")])])},M=[],A={},I=Object(o["a"])(A,j,M,!1,null,null,null),k=I.exports,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"save",on:{click:t.save}},[s("img",{attrs:{src:n("a4fa"),alt:"picture"}})])},z=[],B=(n("99af"),n("2591")),$=a["a"].extend({methods:{save:function(){var t=B["a"].storage().ref(),e=this.canvas.toDataURL();t.child("".concat(+new Date,"-").concat(this.email,".jpeg")).putString(e,"data_url"),alert("Save completed")}},props:["canvas"],computed:Object(h["a"])({},Object(x["c"])(["email"]))}),L=$,R=(n("4053"),Object(o["a"])(L,D,z,!1,null,"7c216b5e",null)),N=R.exports,V=a["a"].extend({props:["isCreated","canvas"],components:{CreationButton:S,LogoutButton:T,BackToMainButton:k,SaveButton:N}}),F=V,J=(n("ca68"),Object(o["a"])(F,v,g,!1,null,"75019dee",null)),G=J.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"picture_box"},[n("span",{staticClass:"name"},[t._v(t._s(t.pictureInfo.email))]),n("img",{attrs:{alt:"picture",src:t.pictureInfo.url}}),n("span",{staticClass:"date"},[t._v(t._s(t.dateLocal))])])},K=[],Y=a["a"].extend({data:function(){return{dateLocal:""}},props:["pictureInfo"],mounted:function(){var t=new Date(+this.pictureInfo.date),e=t.getDate(),n=t.getMonth(),s=t.getFullYear(),a=["January","February","March","April","May","June","July","August","September","October","November","December"];this.dateLocal="".concat((""+e).length<2?"0"+e:e,"/").concat(a[n],"/").concat(s)}}),W=Y,X=(n("c668"),Object(o["a"])(W,H,K,!1,null,"b6e21152",null)),q=X.exports,Q=a["a"].extend({data:function(){return{inputUser:"",arrOfChosenUserPict:""}},methods:Object(h["a"])(Object(h["a"])({},Object(x["b"])(["getPictures"])),{},{filterUsers:function(){var t=this;this.inputUser?this.arrOfChosenUserPict=this.arrayOfUrls.filter((function(e){return e.email===t.inputUser})):this.arrOfChosenUserPict=""}}),mounted:function(){this.getPictures()},computed:Object(h["a"])({},Object(x["c"])(["arrayOfUrls"])),components:{Header:G,PictureBox:q}}),Z=Q,tt=(n("cf01"),Object(o["a"])(Z,p,f,!1,null,"3a59da2a",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main_create"},[n("Header",{attrs:{isCreated:!0,canvas:t.canvas}}),n("div",{staticClass:"canvas_box"},[n("Settings"),n("div",{staticClass:"canvas_block"},[n("canvas",{staticClass:"canvas",attrs:{width:"500px",height:"400px"},on:{mousedown:function(e){return e.preventDefault(),t.mDown(e)},mouseup:function(e){return e.preventDefault(),t.mUp(e)},mousemove:function(e){return e.preventDefault(),t.mMove(e)}}},[t._v(" Обновите браузер ")])])],1)],1)},st=[],at=n("2909"),rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"settings"},[s("div",{staticClass:"settings_figure",on:{click:t.setRectangleMode}},[s("div",{staticClass:"rectangle"})]),s("div",{staticClass:"settings_figure",on:{click:t.setCircleMode}},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"settings_figure",on:{click:t.setLineMode}},[s("div",{staticClass:"line"})]),s("div",{staticClass:"settings_line"},[s("button",{staticClass:"pencil",on:{click:t.setPencilMode}},[s("img",{attrs:{src:n("5a11"),alt:""}})])]),s("div",{staticClass:"settings_size"},[s("button",{on:{click:t.setIsSizeInput}},[t._v("width")]),t.isSizeInput?s("input",{directives:[{name:"model",rawName:"v-model",value:t.localSize,expression:"localSize"}],attrs:{type:"range",width:"50px"},domProps:{value:t.localSize},on:{__r:function(e){t.localSize=e.target.value}}}):t._e()]),s("div",{staticClass:"settings_color"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localColor,expression:"localColor"}],attrs:{type:"color",width:"50px"},domProps:{value:t.localColor},on:{input:function(e){e.target.composing||(t.localColor=e.target.value)}}})])])},it=[],ot=a["a"].extend({data:function(){return{localSize:0,isSizeInput:!1,localColor:"",mode:"pencil"}},computed:Object(h["a"])({},Object(x["c"])(["size","color"])),watch:{localSize:function(){this.setSize(this.localSize)},localColor:function(){this.setColor(this.localColor)}},methods:Object(h["a"])(Object(h["a"])({},Object(x["b"])(["setSize","setColor","setMode"])),{},{setIsSizeInput:function(){this.isSizeInput=!this.isSizeInput},setPencilMode:function(){this.mode="pencil",this.setMode("pencil")},setLineMode:function(){this.mode="line",this.setMode("line")},setCircleMode:function(){this.mode="circle",this.setMode("circle")},setRectangleMode:function(){this.mode="rectangle",this.setMode("rectangle")}}),mounted:function(){this.localSize=this.size,this.localColor=this.color}}),ct=ot,ut=(n("90a2"),Object(o["a"])(ct,rt,it,!1,null,"140ae18d",null)),lt=ut.exports,mt=a["a"].extend({data:function(){return{canvas:null,context:null,colorLocal:"000000",sizeLocal:5,action:"up",arrToBuildFigure:[],imageData:""}},components:{Header:G,Settings:lt},mounted:function(){var t=document.querySelector("canvas"),e=null===t||void 0===t?void 0:t.getContext("2d");this.canvas=t,this.context=e},methods:{mDown:function(t){this.action="down",this.saveImageData(),"pencil"===this.mode&&this.drawPoint(t)},mUp:function(){this.action="up",this.arrToBuildFigure=[],this.saveImageData()},mMove:function(t){if("down"===this.action)if("pencil"===this.mode)this.drawPoint(t);else{var e,n,s=this.getCoordinates(t),a=this.context;if(a.putImageData(this.imageData,0,0),0===this.arrToBuildFigure.length)e=s.x,n=s.y,this.arrToBuildFigure.push([e,n]);else{var r=Object(at["a"])(this.arrToBuildFigure[0]);e=r[0],n=r[1]}a.beginPath(),a.strokeStyle=this.color,a.lineWidth=this.size,a.lineCap="round","line"===this.mode?(a.moveTo(e,n),a.lineTo(s.x,s.y),a.stroke()):"rectangle"===this.mode?a.strokeRect(e,n,s.x-e,s.y-n):"circle"===this.mode&&(a.arc(e,n,s.x-e<0?-(s.x-e):s.x-e,0,2*Math.PI),a.stroke())}},drawPoint:function(t){var e=this.getCoordinates(t),n=this.context;n.beginPath(),n.strokeStyle=this.color,n.lineWidth=this.size,n.lineCap="round",n.moveTo(e.x,e.y),n.lineTo(e.x-e.dx,e.y-e.dy),n.stroke(),n.closePath()},saveImageData:function(){var t,e;this.imageData=this.context.getImageData(0,0,null===(t=this.canvas)||void 0===t?void 0:t.width,null===(e=this.canvas)||void 0===e?void 0:e.height)},getCoordinates:function(t){return{x:t.offsetX,y:t.offsetY,dx:t.movementX,dy:t.movementY}}},computed:Object(h["a"])({},Object(x["c"])(["size","color","mode"]))}),dt=mt,pt=(n("8734"),Object(o["a"])(dt,nt,st,!1,null,"166c9219",null)),ft=pt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth_box"},[n("div",{staticClass:"auth_area"},[t._m(0),n("form",{staticClass:"auth_form",attrs:{action:"sign_in"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userToSent.userMail,expression:"userToSent.userMail"}],staticClass:"auth_input",attrs:{type:"text",placeholder:"mail"},domProps:{value:t.userToSent.userMail},on:{input:function(e){e.target.composing||t.$set(t.userToSent,"userMail",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userToSent.userPassword,expression:"userToSent.userPassword"}],staticClass:"auth_input",attrs:{type:"password",placeholder:"password"},domProps:{value:t.userToSent.userPassword},on:{input:function(e){e.target.composing||t.$set(t.userToSent,"userPassword",e.target.value)}}}),n("button",{staticClass:"auth_button",on:{click:function(e){return e.preventDefault(),t.signInUserLocal(e)}}},[t._v(" sign in ")])]),n("router-link",{attrs:{to:{name:"registration"}}},[n("div",{staticClass:"from_sign_to_reg"},[t._v(" Registration ")])]),t.submitStatus?n("div",{staticClass:"error"},[n("p",[t._v(t._s(t.submitStatus))])]):t._e()],1)])},vt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"c_white"},[t._v(" mini"),n("span",{staticClass:"c_white",staticStyle:{margin:"0 15px"}},[t._v("-")]),t._v("paint ")])}],gt=a["a"].extend({data:function(){return{userToSent:{userMail:"",userPassword:""},submitStatus:""}},methods:Object(h["a"])(Object(h["a"])({},Object(x["b"])(["signInUser"])),{},{signInUserLocal:function(){var t=this;this.signInUser(this.userToSent).catch((function(e){t.submitStatus=e.message,setTimeout((function(){t.submitStatus=""}),2e3)}))}})}),_t=gt,bt=Object(o["a"])(_t,ht,vt,!1,null,null,null),Pt=bt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth_box"},[n("div",{staticClass:"auth_area"},[t._m(0),n("form",{staticClass:"auth_form",attrs:{action:"sign_in"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.userToSent.userMail,expression:"userToSent.userMail"}],staticClass:"auth_input",attrs:{type:"text",placeholder:"mail"},domProps:{value:t.userToSent.userMail},on:{input:function(e){e.target.composing||t.$set(t.userToSent,"userMail",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userToSent.userPassword,expression:"userToSent.userPassword"}],staticClass:"auth_input",attrs:{type:"password",placeholder:"password"},domProps:{value:t.userToSent.userPassword},on:{input:function(e){e.target.composing||t.$set(t.userToSent,"userPassword",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userToSent.userPasswordConfirm,expression:"userToSent.userPasswordConfirm"}],staticClass:"auth_input",attrs:{type:"password",placeholder:"password"},domProps:{value:t.userToSent.userPasswordConfirm},on:{input:function(e){e.target.composing||t.$set(t.userToSent,"userPasswordConfirm",e.target.value)}}}),n("button",{staticClass:"auth_button",on:{click:function(e){return e.preventDefault(),t.registerUserLocal(e)}}},[t._v(" register ")])]),n("router-link",{attrs:{to:{name:"sign"}}},[n("div",{staticClass:"from_sign_to_reg"},[t._v(" Sign in ")])]),t.submitStatus?n("div",{staticClass:"error"},[n("p",[t._v(t._s(t.submitStatus))])]):t._e()],1)])},St=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"c_white"},[t._v(" mini"),n("span",{staticClass:"c_white",staticStyle:{margin:"0 15px"}},[t._v("-")]),t._v("paint ")])}],wt=a["a"].extend({data:function(){return{userToSent:{userMail:"",userPassword:"",userPasswordConfirm:""},submitStatus:""}},methods:Object(h["a"])(Object(h["a"])({},Object(x["b"])(["registerUser"])),{},{registerUserLocal:function(){var t=this;this.userToSent.userPassword===this.userToSent.userPasswordConfirm?this.registerUser(this.userToSent).catch((function(e){t.submitStatus=e.message,setTimeout((function(){t.submitStatus=""}),2e3)})):(this.submitStatus="Check your password",setTimeout((function(){t.submitStatus=""}),2e3))}})}),Ot=wt,xt=Object(o["a"])(Ot,Ct,St,!1,null,"28b67d39",null),Ut=xt.exports;a["a"].use(m["a"]);var yt=new m["a"]({mode:"history",routes:[{name:"main",path:d.main,component:et},{name:"create",path:d.create,component:ft},{name:"sign",path:d.sign,component:Pt},{name:"registration",path:d.registration,component:Ut}]}),Et=yt,Tt=n("1da1"),jt=(n("96cf"),{user:"",email:""}),Mt={user:function(t){return t.user},email:function(t){return t.email}},At={setUser:function(t,e){t.user=e},setEmail:function(t,e){t.email=e}},It={registerUser:function(t,e){return Object(Tt["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit,s=e.userMail,a=e.userPassword,n.next=4,B["a"].auth().createUserWithEmailAndPassword(s,a);case 4:n.sent;case 5:case"end":return n.stop()}}),n)})))()},signInUser:function(t,e){return Object(Tt["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit,s=e.userMail,a=e.userPassword,n.next=4,B["a"].auth().signInWithEmailAndPassword(s,a);case 4:n.sent;case 5:case"end":return n.stop()}}),n)})))()},logoutUser:function(t){var e=t.commit;B["a"].auth().signOut(),e("setUser","")}},kt={state:jt,getters:Mt,mutations:At,actions:It},Dt={size:5,color:"#000000",mode:"pencil"},zt={size:function(t){return t.size},color:function(t){return t.color},mode:function(t){return t.mode}},Bt={setSize:function(t,e){t.size=e},setColor:function(t,e){t.color=e},setMode:function(t,e){t.mode=e}},$t={setSize:function(t,e){var n=t.commit;n("setSize",e)},setColor:function(t,e){var n=t.commit;n("setColor",e)},setMode:function(t,e){var n=t.commit;n("setMode",e)}},Lt={state:Dt,getters:zt,mutations:Bt,actions:$t},Rt=(n("159b"),n("1276"),n("ac1f"),n("fb6a"),{arrayOfUrls:[]}),Nt={arrayOfUrls:function(t){return t.arrayOfUrls.sort((function(t,e){return t.date===e.date?0:t.date>e.date?-1:t.date<e.date?1:void 0}))}},Vt={setArrayOfUrls:function(t,e){t.arrayOfUrls=e}},Ft={getPictures:function(t){return Object(Tt["a"])(regeneratorRuntime.mark((function e(){var n,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,s=[],a=B["a"].storage().ref(),a.listAll().then((function(t){t.items.forEach((function(t){var e=t.name.split("-")[1],n=5,r=e.slice(0,e.length-n),i=t.name.split("-")[0];a.child(t.name).getDownloadURL().then((function(t){s.push({url:t,email:r,date:i})}))}))})),n("setArrayOfUrls",s);case 5:case"end":return e.stop()}}),e)})))()}},Jt={state:Rt,getters:Nt,mutations:Vt,actions:Ft};a["a"].use(x["a"]);var Gt={state:{version:"1.0.0"},modules:{feed:Jt,create:Lt,user:kt}},Ht=new x["a"].Store(Gt);n("ea7b"),n("66ce"),n("741f"),n("588e");a["a"].config.productionTip=!1,new a["a"]({router:Et,store:Ht,render:function(t){return t(l)},created:function(){var t=this,e={apiKey:"AIzaSyAo1PigM7_G1pLFmJFTPvy8tV3MCPge5s8",authDomain:"mini-paint-e4c63.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",VUE_APP_API_KEY:"AIzaSyAo1PigM7_G1pLFmJFTPvy8tV3MCPge5s8",VUE_APP_APP_ID:"1:152223703025:web:2582610c74c0022a4eae50",VUE_APP_AUTH_DOMAIN:"mini-paint-e4c63.firebaseapp.com",VUE_APP_MESSAGING_SENDER_ID:"152223703025",VUE_APP_PROJECT_ID:"mini-paint-e4c63",VUE_APP_STORAGE_BUCKET:"mini-paint-e4c63.appspot.com",BASE_URL:"/"}).VUE_APP_DATABASE_URL,projectId:"mini-paint-e4c63",storageBucket:"mini-paint-e4c63.appspot.com",messagingSenderId:"152223703025",appId:Object({NODE_ENV:"production",VUE_APP_API_KEY:"AIzaSyAo1PigM7_G1pLFmJFTPvy8tV3MCPge5s8",VUE_APP_APP_ID:"1:152223703025:web:2582610c74c0022a4eae50",VUE_APP_AUTH_DOMAIN:"mini-paint-e4c63.firebaseapp.com",VUE_APP_MESSAGING_SENDER_ID:"152223703025",VUE_APP_PROJECT_ID:"mini-paint-e4c63",VUE_APP_STORAGE_BUCKET:"mini-paint-e4c63.appspot.com",BASE_URL:"/"}).VUE_APP_APPID};B["a"].initializeApp(e),B["a"].auth().onAuthStateChanged((function(e){e?(t.$store.commit("setUser",e.uid),t.$store.commit("setEmail",e.email),"main"!==t.$route.name&&t.$router.push({name:"main"})):"sign"!==t.$route.name&&t.$router.push({name:"sign"})}))}}).$mount("#app")},cf01:function(t,e,n){"use strict";n("644e")},fee5:function(t,e,n){}});